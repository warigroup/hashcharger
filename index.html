<!doctype html>
<html lang="en">
<head>

<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<link href="styles.css" rel="stylesheet">
</head>

<body>

<button id="open-warihash">Open WariHash form</button>


<script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script> 
<script crossorigin src="https://unpkg.com/axios@0.17/dist/axios.min.js"></script>

<!-- PRE COMPILE BABEL -->
<script type="text/babel">
 
class WariHashApp extends React.Component {
    constructor() {
        super() 
        this.state = {
            page: "orderpage",
            durationfocus: false,
            durationCliked: false,
            duration_example: "",
            items: [],
            configsdata: [],
            hashrate: "",
            hashrate_units: "",
            mining_algo: "",
            duration: "",
            host: "",
            port: "",
            email: "",
            location: "NA East"
        }
    }

    componentDidMount() {
     fetch("https://devapi.warihash.org/get_configs/").then(res => this.setState({ configsdata: res }));
    };
  
    unmount = () => ReactDOM.unmountComponentAtNode(ReactDOM.findDOMNode(this).parentNode);

    submitOrder = () => {
      axios.post(
      'https://devapi.warihash.org/bid_make/',
      {
        hashrate: this.state.hashrate,
        hashrate_units: this.state.hashrate_units,
        mining_algo: this.state.mining_algo,
        duration: this.state.duration,
        host: this.state.host,
        port: this.state.port,
        email: this.state.email,
        location: this.state.location
      },
      { headers: {"Content-Type": "application/json"} }
    )
    .then(res => this.setState({ page: "invoicepage" }) )
    .catch(err => console.log(err));
   }


    render() {
        const {HashrateUnit, duration, durationfocus, durationCliked, duration_example} = this.state;

        function orderPage() {
            return (
               <div>
                  <div className="column-1">
                    <div className="form-group" style={{display: "inline-block"}}>
                        <label>Miner Location</label>
                        <br />
                        <select>
                            <option 
                            className="selectstyles" 
                            value="NA East"
                            >
                            North America East
                            </option>
                            <option 
                            className="selectstyles" 
                            value="NA West"
                            >
                            North America West
                            </option>

                            <option 
                            className="selectstyles" 
                            value="EU East"
                            >
                            Europe East
                            </option>
                        </select>
                    </div>
                 </div>

                  <div className="column-2">
                    <div className="form-group" style={{display: "inline-block"}}>
                        <label htmlFor="duration" className="inputlabel">
                        Order Duration:
                        </label>
                        <div
                          className={
                            durationfocus === true
                              ? "input-group input-group-md focused"
                              : "input-group input-group-md"
                          }
                          style={{maxWidth: "285px"}}
                        >
                          <div className="input-group-prepend">
                            <span
                              className="input-group-text"
                              style={{
                                background: "white",
                                border: "none",
                                color: "rgba(0,0,0,0.5)"
                              }}
                            >
                            <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="clock" 
                            className="svg-inline--fa fa-clock fa-w-16" role="img" style={{width: "25px"}} 
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 514 514">
                            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg>
                            </span>
                          </div>
                          <input
                            type="text"
                            name="duration"
                            
                            className="form-control inputstyles2"
                            style={{
                              border: "none",
                              borderRadius: "7px",
                              fontSize: "0.82em"
                            }}
                            onChange={event => this.setState({duration: event.target.value})}
                            autoComplete="off"
                            required
                          />
                          <p style={{paddingTop: "0px", 
                          paddingBottom: "0px", 
                          marginBottom: "0px",
                          position: "relative",
                          fontSize: "0.88em",
                          top: "6.2px",
                          right: "13px", 
                          zIndex: "2342342"}}>
                          Hours
                          </p>
                          <br />
                        </div>
                    </div>
                    </div>


                  <div className="column-3">
                    <div className="form-group">
                        <label htmlFor="hashrate" className="inputlabel">
                         Hashrate to Purchase:
                        </label>
                        <div
                          className="input-group input-group-md focused"
                          style={{maxWidth: "285px"}}
                        >
                          <div className="input-group-prepend">
                            <span
                              className="input-group-text"
                              style={{
                                background: "white",
                                border: "none",
                                color: "rgba(0,0,0,0.5)"
                              }}
                            >
                            
                            </span>
                          </div>
                          <input
                            type="text"
                            name="hashrate"
                            onChange={event => this.setState({hashrate: event.target.value})}
                            placeholder=""
                            className="form-control inputstyles2"
                            style={{
                              border: "none",
                              borderRadius: "7px",
                              fontSize: "0.82em"
                            }}
                            
                            autoComplete="off"
                            required
                          />   <p style={{paddingTop: "0px", 
                          paddingBottom: "0px", 
                          marginBottom: "0px",
                          position: "relative",
                          fontSize: "0.92em",
                          top: "5.9px",
                          right: "13px", 
                          zIndex: "222"}}>
                          {HashrateUnit}
                          </p>
                          <br />
                        </div>
                        </div>
                      </div>


                    <div className="column-4">
                    <div className="form-group">
                        <label htmlFor="hashrate" className="inputlabel">
                         Email:
                        </label>
                        <div
                          className="input-group input-group-md focused"
                          style={{maxWidth: "285px"}}
                        >
                          <div className="input-group-prepend">
                            <span
                              className="input-group-text"
                              style={{
                                background: "white",
                                border: "none",
                                color: "rgba(0,0,0,0.5)"
                              }}
                            >
                            
                            </span>
                          </div>
                          <input
                            type="text"
                            name="hashrate"
                            placeholder=""
                            className="form-control inputstyles2"
                            style={{
                              border: "none",
                              borderRadius: "7px",
                              fontSize: "0.82em"
                            }}
                            onChange={event => this.setState({email: event.target.value})}
                            autoComplete="off"
                          />   <p style={{paddingTop: "0px", 
                          paddingBottom: "0px", 
                          marginBottom: "0px",
                          position: "relative",
                          fontSize: "0.92em",
                          top: "5.9px",
                          right: "13px", 
                          zIndex: "222"}}>
                          
                          </p>
                          <br />
                        </div>
                        </div>
                    </div>

                    
                    <br />
                    <br />
                    <br />

                   
               </div>
            )
        }

        function invoicePage() {
            return (
                <p>Invoice Page</p>
            )
        }

        function searchPage() {
            return (
                <p>Search Page</p>
            )
        }

        function detailsPage() {
            return (
                <p>details Page</p>
            )
        }

        return (
           <div className="app-container warihash-app" style={{ width: "100vw", height: "100vh", background: "white", 
           color: "black", zIndex: "58458348948348", position: "absolute", top: "0", left: "0"}}>
           <div className="wrapper" style={{padding: "25px"}}>
      
             <div className="navigation">
                <div className="nav-title" style={{width: "80%", display: "inline-block"}}>
                  <h1>Buy Hashing Power</h1>
                </div>
                <div className="close-btn-container" style={{width: "20%", display: "inline-block"}}>
                <button className="close-btn" onClick={() => this.unmount()}> 
                    <h1>&times;</h1>
                </button>
                </div>
             </div>
            

                <div className="body">
                    {this.state.page === "orderpage" ? orderPage() : detailsPage()}


                    <div className="buttons-row">
                       <div className="column-5">
                        <button className="cancel-btn" onClick={() => this.unmount()}>Cancel</button>
                        { this.state.page === "orderpage" ?
                        <button className="submit-btn" onClick={() => this.submitOrder()}>Submit Order</button>
                        : null }
                      </div>
                    </div>
                </div>
                
            </div>
           </div>
        );
    }
}

document.getElementById('open-warihash').addEventListener("click", function(){
    ReactDOM.render(
        <WariHashApp />,
        document.body.appendChild(document.createElement("DIV"))
    );
}); 

</script>

</body>
</html>